var ABCContainer,Actions,Behaviors,ButtonContainer,ChooseContainer,CloneCompleterContainer,CloneContainer,Component,ComponentGroup,ComponentObserver,CrossWordsContainer,DragContainer,Evaluator,Game,GameObserver,GridContainer,ImageCompleterContainer,ImageContainer,ImageWordCompleterContainer,Instructions,LabelContainer,LetterContainer,LetterDragContainer,MainContainer,Methods,Mobile,Module,Observer,Oda,PhraseCloneContainer,PhraseCompleterContainer,Preloader,Scene,SceneFactory,SceneObserver,SceneStack,Score,ScrambledWordContainer,SpriteContainer,StepContainer,StepsContainer,TextCloneContainer,TextCompleterContainer,TextContainer,Utilities,WordCompleterContainer,WordSearchContainer,WriteContainer,base,base1,base2,base3,base4,base5,base6,moduleKeywords,slice=[].slice,bind=function(a,b){return function(){return a.apply(b,arguments)}},indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},extend=function(a,b){function c(){this.constructor=a}for(var d in b)hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},hasProp={}.hasOwnProperty;null==window.dealersjs&&(window.dealersjs={}),null==window.d2oda&&(window.d2oda={}),null==window.lib&&(window.lib={}),null==(base=window.dealersjs).mobile&&(base.mobile=Mobile=function(){function a(){}return a.user_agent=navigator.userAgent.toLowerCase(),a.isIOS=function(){return!0===this.isIpad()||!0===this.isIphone()||!0===this.isIpod()?!0:!1},a.isIpad=function(){return this.user_agent.indexOf("ipad")>-1},a.isIphone=function(){return this.user_agent.indexOf("iphone")>-1},a.isIpod=function(){return this.user_agent.indexOf("ipod")>-1},a.isAndroid=function(){return this.user_agent.indexOf("android")>-1},a.isMobile=function(){return this.user_agent.indexOf("mobile")>-1},a}()),null==(base1=window.d2oda).utilities&&(base1.utilities=Utilities=function(){function a(){}return a.shuffleNoRepeat=function(a,b){var c,d,e,f,g,h;for(c=a.slice(0),h=Array(),d=e=1,g=b;g>=1?g>=e:e>=g;d=g>=1?++e:--e)f=Math.round(Math.random()*(c.length-1)),h.push(c[f]),c.splice(f,1);return h},a.shuffle=function(a){var b,c,d,e,f,g;for(b=a.slice(0),c=e=f=b.length-1;0>=f?0>=e:e>=0;c=0>=f?++e:--e)d=Math.floor(Math.random()*(c+1)),g=[b[d],b[c]],b[c]=g[0],b[d]=g[1];return b},a.clone=function(a){var b,c,d;if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return b="",null!=a.global&&(b+="g"),null!=a.ignoreCase&&(b+="i"),null!=a.multiline&&(b+="m"),null!=a.sticky&&(b+="y"),new RegExp(a.source,b);d=new a.constructor;for(c in a)d[c]=this.clone(a[c]);return d},a.isArray=function(a){return Array.isArray(a||function(){}),"[object Array]"==={}.toString.call(a)},a}()),null==(base2=window.d2oda).behaviors&&(base2.behaviors=Behaviors=function(){function a(){}return a.initDragListener=function(){return a.on("mousedown",a.handleMouseDown)},a.endDragListener=function(){return a.off("mousedown",a.handleMouseDown)},a}()),null==(base3=window.d2oda).actions&&(base3.actions=Actions=function(){function a(){}return a.fadeOut=function(a,b){return null==a&&(a=!1),null==b&&(b=!1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),0===this.alpha&&b===!1?a?TweenLite.from(this,.5,{alpha:1}):(this.y-=20,TweenLite.from(this,.5,{alpha:1,y:this.y+20})):a?TweenLite.to(this,.5,{alpha:0}):(this.y+=20,TweenLite.to(this,.5,{alpha:0,y:this.y-20}))},a.fadeIn=function(a,b){return null==a&&(a=!1),null==b&&(b=!1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),1===this.alpha&&b===!1?a?TweenLite.from(this,.5,{alpha:0}):(this.y-=20,TweenLite.from(this,.5,{alpha:0,y:this.y+20})):a?TweenLite.to(this,.5,{alpha:1}):(this.y+=20,TweenLite.to(this,.5,{alpha:1,y:this.y-20}))},a.pulse=function(a){return null==a&&(a=!0),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,a?TweenMax.to(this,.5,{scaleX:.8,scaleY:.8,repeat:-1,yoyo:!0}):void 0},a.blink=function(a){return null==a&&(a=!0),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,a?TweenMax.to(this,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},a.hide=function(){return this.visible=!1},a.setInOrigin=function(){return this.x=this.pos.x,this.y=this.pos.y},a.putInPlace=function(a,b,c,d){return null==b&&(b=1),null==c&&(c=1),null==d&&(d=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),TweenLite.to(this,1,{ease:Back.easeOut,delay:.1,x:a.x,y:a.y,alpha:b,scaleX:c,scaleY:d})},a.returnToPlace=function(a,b,c){return null==a&&(a=1),null==b&&(b=1),null==c&&(c=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),TweenLite.to(this,.5,{ease:Back.easeOut,delay:.1,x:this.pos.x,y:this.pos.y,alpha:a,scaleX:b,scaleY:c})},a}()),null==(base4=window.d2oda).methods&&(base4.methods=Methods=function(){function a(){}return a.createBitmap=function(a,b,c,d,e){var f,g,h;return null==e&&(e="tl"),h=lib.preloader.preload.getResult(b),g=new createjs.Container,f=new createjs.Bitmap(h),f.mouseEnabled=!1,g.hitTester=new createjs.Shape,g.hitTester.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(0,0,h.width,h.height),g.hitTester.name="h"+a,g.x=c,g.y=d,g.width=h.width,g.height=h.height,g.name=a,g.mouseChildren=!1,g.addChild(f,g.hitTester),this.setPosition(e,g),g},a.insertBitmap=function(a,b,c,d,e){var f;return null==e&&(e="tl"),f=this.createBitmap(a,b,c,d,e),this.add(f),f},a.createText=function(a,b,c,d,e,f,g){var h;return null==g&&(g="left"),h=new createjs.Text(b,c,d),h.name=a,h.x=e,h.y=f,h.textAlign=g,h},a.insertText=function(a,b,c,d,e,f,g){var h;return null==g&&(g="left"),h=this.createText(a,b,c,d,e,f,g),this.add(h),h},a.createSprite=function(a,b,c,d,e,f){var g,h,i,j,k,l;return null==c&&(c=null),null==f&&(f="tl"),k=function(){var a,c,d;for(d=[],a=0,c=b.length;c>a;a++)i=b[a],d.push(lib.preloader.preload.getResult(i));return d}(),g=new createjs.Container,l=k[0].width,h=k[0].height,j=new createjs.SpriteSheet({images:k,animations:c,frames:{width:l,height:h}}),g.animation=new createjs.Sprite(j),g.animation.mouseEnabled=!1,g.animation.currentFrame=0,g.hitTester=new createjs.Shape,g.hitTester.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(0,0,l,h),g.hitTester.name="h"+a,g.x=d,g.y=e,g.width=l,g.height=h,g.name=a,g.mouseChildren=!1,g.addChild(g.animation,g.hitTester),this.setPosition(f,g),g},a.insertSprite=function(a,b,c,d,e,f){var g;return null==c&&(c=null),null==f&&(f="tl"),g=this.createSprite(a,b,c,d,e,f),this.add(g),g},a.setPosition=function(a,b){switch(null==b&&(b=null),b||(b=this),a){case"tc":return this.setReg(b,b.width/2,0);case"tr":return this.setReg(b,b.width,0);case"ml":return this.setReg(b,0,b.height/2);case"mc":return this.setReg(b,b.width/2,b.height/2);case"mr":return this.setReg(b,b.width,b.height/2);case"bl":return this.setReg(b,0,b.height);case"bc":return this.setReg(b,b.width/2,b.height);case"br":return this.setReg(b,b.width,b.height);default:return this.setReg(b,0,0)}},a.setReg=function(a,b,c){return a.regX=b,a.regY=c,a},a.add=function(a,b){return null==b&&(b=!0),this.addChild(a),b?lib[a.name]=a:void 0},a.delay=function(){var a,b,c;return c=arguments[0],b=arguments[1],a=3<=arguments.length?slice.call(arguments,2):[],setTimeout.apply(null,[b,c].concat(slice.call(a)))},a}()),null==(base5=window.d2oda).stage&&(base5.stage={w:800,h:600,r:1}),null==(base6=window.d2oda).evaluator&&(base6.evaluator=Evaluator=function(){function a(){}return a.success=null,a.total=0,a.total_index=0,a.evaluate=function(a,b,c){if(console.log(a,b,c),a instanceof Function)return void a(b,c);switch(a){case"repeat":return this.evaluateRepeat();case"finish":return this.evaluateFinish(c);case"global_01":return this.evaluateGlobal01(b);case"click_O1":return this.evaluateClick01(b,c);case"click_O1_01":return this.evaluateClick01_01(b,c);case"click_02":return this.evaluateClick02(b,c);case"click_03":return this.evaluateClick03(b,c);case"drop_01":return this.evaluateDrop01(b,c);case"drop_02":return this.evaluateDrop02(b,c);case"drop_02_01":return this.evaluateDrop02_01(b,c);case"drop_02_02":return this.evaluateDrop02_02(b,c);case"drop_03":return this.evaluateDrop03(b,c);case"drop_04":return this.evaluateDrop04(b,c);case"clon_01":return this.evaluateClon01(b,c);case"switch_01":return this.evaluateSwitch01(b,c);case"choose_01":return this.evaluateChoose01(b);case"show_choose_01":return this.evaluateShowChoose01(b,c);case"hangman_click_01":return this.evaluateHangmanClick01(b,c);case"show_click_01":return this.evaluateShowClick01(b,c);case"phrase_drop_01":return this.evaluatePhraseDrop01(b,c);case"phrase_drop_02":return this.evaluatePhraseDrop02(b,c);case"phrase_drop_03":return this.evaluatePhraseDrop03(b,c);case"sprite_drop_01":return this.evaluateSpriteDrop01(b,c);case"word_drop_01":return this.evaluateWordDrop01(b,c);case"word_complete_01":return this.evaluateWordComplete01(b,c)}},a.evaluateRepeat=function(){return createjs.Sound.stop(),createjs.Sound.play(lib.scene.snd)},a.evaluateFinish=function(a){var b,c,d,e,f,g,h,i;if(lib[a].droptargets)for(g=lib[a].droptargets,c=0,d=g.length;d>c;c++)b=g[c],b.showEvaluation(),b.complete&&lib.score.plusOne();else if(lib[a].group)for(h=lib[a].group,f=0,e=h.length;e>f;f++)i=h[f],lib[i].showEvaluation&&lib[i].showEvaluation(),lib[i].complete&&lib.score.plusOne();return lib.scene.success(!1)},a.evaluateGlobal01=function(a){return lib[a].index!==this.success?lib.scene.fail():lib[a].parent.complete?void 0:(lib[a].parent.complete=!0,lib.scene.success())},a.evaluateGlobal02=function(a){return lib[a].index===this.success?(lib.scene.success(),lib.scene.nextStep()):lib.scene.fail()},a.evaluateHangmanClick01=function(a,b){var c,d,e,f,g,h,i,j,k;for(e=!0,lib[a].visible=!1,j=lib[b].droptargets,f=0,g=j.length;g>f;f++)d=j[f],lib[a].index===d.success&&(d.update({complete:!0}),e=!1);if(e)lib.scene.fail(),lib.hangman.current++,lib.hangman.current>=lib.hangman.group.length?(lib.hangman.current=0,lib.scene.nextStep()):lib.hangman.update({type:"fadeIn",target:lib.hangman.group[lib.hangman.current]});else for(c=!0,k=lib[b].droptargets,i=0,h=k.length;h>i;i++)d=k[i],d.complete||(c=!1);return c?(lib.hangman.current=0,lib.scene.success()):void 0},a.evaluateShowClick01=function(a,b){return lib[b].update({type:"fadeIn",target:lib[a].index})},a.evaluateWordDrop01=function(a,b){return lib[a].index!==b.success?(lib[a].afterFail(),lib.scene.fail()):(b.complete=!0,b.update(),lib[a].afterSuccess(),b.parent.currentTarget++,b.parent.currentTarget===b.parent.droptargets.length?(lib[b.parent.target][b.parent.fx](),lib.scene.success(),b.parent.onComplete()):void 0)},a.evaluateWordComplete01=function(a,b){var c;return c=lib[a].oncomplete.index,lib[b].words[c].enabled=!0},a.evaluateClick01=function(a,b){var c,d,e;return c=lib[a].index,e=lib[b].droptargets,d=lib[b].currentTarget,c!==e[d].success?lib.scene.fail():(e[d].complete=!0,e[d].update(),lib[b].currentTarget++,createjs.Sound.play("s/good"),lib[b].currentTarget===e.length?lib.scene.success():void 0)},a.evaluateClick01_01=function(a,b){var c,d,e,f;return c=lib[a].index,e=lib[b].droptargets,d=lib[b].currentTarget,c!==e[d].success?lib.scene.fail():(e[d].complete=!0,e[d].update(),lib[b].currentTarget++,lib[b].currentTarget===e.length?(f=lib[b].nextGroup,lib.score.plusOne(),createjs.Sound.play("s/good"),lib[f].setInvisible(!1)):void 0)},a.evaluateClick02=function(a,b){return lib[a].index===lib[b].success?(lib[b].complete=!0,lib[a].updateState(),lib.scene.success()):lib.scene.fail()},a.evaluateClick03=function(a,b){var c,d;return d=lib[b].targets,c=lib[b].currentTarget,lib[a].index===lib[b].success?(d[c].complete=!0,lib[b].fadeOut(d[c]),lib.scene.success(!1),createjs.Sound.play("s/good"),lib[b].currentTarget++):(lib[b].warnings++,lib.scene.fail(),3===lib[b].warnings?(lib.score.stop(),lib.game.nextScene()):void 0)},a.evaluateDrop01=function(a,b){return lib[a].afterSuccess({x:b.x,y:b.y},1,.5,.5),lib[a].index===b.success?b.update():b.update(!1)},a.evaluateDrop02=function(a,b){return lib[a].index===b.success?(b.complete=!0,b.update(),lib[a].afterSuccess(),lib.scene.success()):(lib[a].afterFail(),lib.scene.fail())},a.evaluateDrop02_01=function(a,b){var c,d,e,f,g,h,i,j;for(c=!0,lib[a].index===b.success?b.update(lib[a].label.text,!0):b.update(lib[a].label.text,!1),lib[a].afterSuccess(),i=lib[a].droptargets,e=0,f=i.length;f>e;e++)d=i[e],""===d.text.text&&(c=!1);if(c){for(j=lib[a].droptargets,h=0,g=j.length;g>h;h++)d=j[h],d.showEvaluation(),d.complete&&lib.score.plusOne();return lib.scene.success(!1)}},a.evaluateDrop02_02=function(a,b){return lib[a].index===b.success?(b.update({complete:!0}),lib[a].afterSuccess(),lib.scene.success()):(lib[a].afterFail(),lib.scene.fail())},a.evaluateDrop03=function(a,b){return lib[a].index!==b.success?(lib[a].afterFail(),lib.scene.fail()):(b.complete=!0,b.update(),lib[a].afterSuccess(),b.parent.currentTarget++,b.parent.currentTarget===b.parent.droptargets.length?(lib[b.parent.target].fadeOut(),lib.scene.success()):void 0)},a.evaluatePhraseDrop01=function(a,b){return lib[a].index!==b.success?(lib[a].afterFail(),lib.scene.fail()):(b.complete=!0,b.update(),lib[a].afterSuccess(),b.parent.currentTarget++,lib.score.plusOne(),createjs.Sound.play("s/good"),b.parent.currentTarget===b.parent.droptargets.length?lib.scene.success(!1):void 0)},a.evaluatePhraseDrop02=function(a,b){return lib[a].index!==b.success?(lib[a].afterFail(),lib.scene.fail()):(b.complete=!0,b.update(),lib[a].afterSuccess(),b.parent.currentTarget++,b.parent.currentTarget===b.parent.droptargets.length?lib.scene.success():void 0)},a.evaluatePhraseDrop03=function(a,b){return lib[a].index!==b.success?(lib[a].afterFail(),lib.scene.fail()):(b.complete=!0,b.update(),lib[a].afterSuccess(),b.parent.currentTarget++,b.parent.currentTarget===b.parent.droptargets.length?(b.parent.fadeOut(),b.parent.hideLabel(),lib.scene.success()):void 0)},a.evaluateSpriteDrop01=function(a,b){return lib[a].index===b.parent.success?(console.log(b.parent,b.parent.nextStep),b.parent.nextStep(),lib[a].afterSuccess(),lib.scene.success(!0,!1)):(lib[a].afterFail(),lib.scene.fail())},a.evaluateDrop04=function(a,b){return lib[a].index===b.success?(b.update({complete:!0}),lib[a].afterSuccess(),b.parent.evaluateWords()):(lib[a].afterFail(),lib.scene.fail())},a.evaluateClon01=function(a,b){return lib[a].index===b.success?b.update(!0,lib[a].bmpid):b.update(!1,lib[a].bmpid),lib[a].afterSuccess()},a.evaluateSwitch01=function(a,b){return lib[a].index===lib[b].success?(lib[b].doSwitch(),lib.scene.success()):lib.scene.fail()},a.evaluateShowChoose01=function(a,b){var c,d,e,f,g,h,i,j;if(TweenMax.killTweensOf(lib[a]),TweenLite.killTweensOf(lib[a]),lib[a].alpha=1,lib[a].scaleX=i=1,e=lib[a].index-1,d2oda.utilities.isArray(b)){for(h=[],f=0,g=b.length;g>f;f++)j=b[f],d=lib[j].group[e],h.push(c=lib[j].update({type:"fadeIn",target:d}));return h}},a.evaluateChoose01=function(a){return lib.scene.choose=lib[a].index,lib.scene.success(!1)},a}()),Array.prototype.toDictionary=function(a){var b,c,d,e;for(b={},c=0,d=this.length;d>c;c++)e=this[c],null!=e[a]&&(b[e[a]]=e);return b},Array.prototype.where=function(a){var b;return"object"!=typeof a?[]:(b=Object.keys(a).length,this.filter(function(c){var d,e,f;e=0;for(d in a)f=a[d],c[d]===f&&(e+=1);return e===b?!0:!1}))},Array.prototype.unique=function(){var a,b,c,d,e,f;for(c={},a=b=0,d=this.length;d>=0?d>b:b>d;a=d>=0?++b:--b)c[this[a]]=this[a];e=[];for(a in c)f=c[a],e.push(f);return e},Array.prototype.compare=function(a){var b;if(b=this.length,b!==a.length)return!1;for(;b--;)if(this[b]!==a[b])return!1;return!0},Array.prototype.merge=function(a){return Array.prototype.push.apply(this,a)},Oda=function(){function a(){this.playAgain=bind(this.playAgain,this),this.handlePlayAgain=bind(this.handlePlayAgain,this),this.endGame=bind(this.endGame,this),this.initGame=bind(this.initGame,this),this.removeMobileInstructions=bind(this.removeMobileInstructions,this),this.initMobileInstructions=bind(this.initMobileInstructions,this),this.playInstructions=bind(this.playInstructions,this),this.setGame=bind(this.setGame,this);var a,b,c;lib.preloader=new Preloader,lib.mainContainer=new MainContainer,a="assets/",b=[{id:"sg",src:a+"start_game.png"},{id:"pa",src:a+"play_again.png"},{id:"s/boing",src:a+"boing.mp3"},{id:"s/good",src:a+"good.mp3"},{id:"s/wrong",src:a+"wrong.mp3"}],this.manifest=function(){var b,d,e,f;for(e=this.manifest,f=[],b=0,d=e.length;d>b;b++)c=e[b],f.push({id:""+c.id,src:""+(a+c.src)});return f}.call(this),Array.prototype.push.apply(this.manifest,b),this._setStage().resize(),lib.preloader.addEventListener("complete",this.setGame),lib.preloader.load(this.manifest)}return a.prototype.resize=function(){var a,b;return b=window.innerWidth,a=window.innerHeight,d2oda.stage.r=Math.min(b/d2oda.stage.w,a/d2oda.stage.h),lib.mainContainer.scaleX=d2oda.stage.r,lib.mainContainer.scaleY=d2oda.stage.r,$("#oda").width(b),this.stage.canvas.width=b,this.stage.canvas.height=a,lib.mainContainer.x=this.stage.canvas.width/2,lib.mainContainer.y=this.stage.canvas.height/2,this},a.prototype.setGame=function(){var a;return lib.mainContainer.removeAllChildren(),a=d2oda.utilities.clone(this.game),lib.game=new Game(a),this.playInstructions()},a.prototype.playInstructions=function(){var a;return dealersjs.mobile.isIOS()||dealersjs.mobile.isAndroid()?(lib.mainContainer.insertBitmap("start","sg",d2oda.stage.w/2,d2oda.stage.h/2,"mc"),lib.start.addEventListener("click",this.initMobileInstructions),TweenLite.from(lib.start,.3,{alpha:0,y:lib.start+20})):(a=lib.instructions.playSound("s/instructions"),a.addEventListener("complete",this.initGame))},a.prototype.initMobileInstructions=function(a){var b;return b=lib.instructions.playSound("s/instructions"),a.target.removeEventListener("click",this.initMobileInstructions),b.addEventListener("complete",this.initGame),TweenLite.to(lib.start,.3,{alpha:0,y:lib.start.y+20,onComplete:this.removeMobileInstructions})},a.prototype.removeMobileInstructions=function(){return lib.mainContainer.removeChild(lib.start)},a.prototype.initGame=function(){return lib.game.start()},a.prototype.endGame=function(){return createjs.Sound.stop(),lib.mainContainer.insertBitmap("play_again","pa",d2oda.stage.w/2,d2oda.stage.h/2,"mc"),lib.play_again.addEventListener("click",this.handlePlayAgain),TweenLite.from(lib.play_again,.5,{alpha:0,y:lib.play_again.y-20})},a.prototype.handlePlayAgain=function(){return lib.play_again.removeEventListener("click",this.handlePlayAgain),TweenLite.to(lib.play_again,.5,{alpha:0,y:lib.play_again.y-20,onComplete:this.playAgain})},a.prototype.playAgain=function(){return this.setGame()},a.prototype.tick=function(){return this.stage.update()},a.prototype._setStage=function(){return this.stage=new createjs.Stage("oda"),createjs.Ticker.addEventListener("tick",this.stage),createjs.Ticker.setFPS(60),createjs.Touch.enable(this.stage),this.stage.enableMouseOver(50),this.stage.addChild(lib.mainContainer),lib.preloader.mainContainer=lib.mainContainer,this},window.Oda=a,a}(),Preloader=function(){function a(){this.handleComplete=bind(this.handleComplete,this),this.handleProgress=bind(this.handleProgress,this),this.initialize()}return a.prototype=new createjs.EventDispatcher,a.prototype.EventDispatcher_initialize=a.prototype.initialize,a.prototype.initialize=function(){var a,b,c,d,e;for(this.EventDispatcher_initialize(),this.preload=new createjs.LoadQueue(!1),this.loadStep=0,this.barHeight=7,this.barWidth=35,this.loaderColor=null!=(d=$("#oda").data("loadercolor"))?d:"#E62922",this.loaderBar=new createjs.Container,this.loaderBar.x=d2oda.stage.w/2,this.loaderBar.y=d2oda.stage.h/2,e=[],b=c=1;13>=c;b=c+=1)a=new createjs.Shape,a.graphics.setStrokeStyle(1).beginStroke(this.loaderColor).beginFill(this.loaderColor).drawRoundRect(0,0,this.barWidth,this.barHeight,5),a.regX=-20,a.regY=this.barHeight/2,a.rotation=30*(b-1),a.alpha=.05,a.name="bar"+b.toString(),e.push(this.loaderBar.addChild(a));return e},a.prototype.load=function(a){return this.preload.installPlugin(createjs.Sound),this.preload.addEventListener("progress",this.handleProgress),this.preload.addEventListener("complete",this.handleComplete),this.preload.loadManifest(a),this.mainContainer.addChild(this.loaderBar),TweenLite.from(this.loaderBar,1,{alpha:.1,ease:Quart.easeOut}),this},a.prototype.handleProgress=function(a){var b;return b=Math.round(100*this.preload.progress),a.loaded>=this.loadStep/12&&this.loadStep<12?(this.showBar("bar"+(this.loadStep+1)),this.loadStep++):void 0},a.prototype.handleComplete=function(){return this.preload.removeEventListener("progress",this.handleProgress),this.preload.removeEventListener("complete",this.handleComplete),this.dispatchEvent({type:"complete"}),TweenLite.to(this.loaderBar,1,{alpha:0,ease:Quart.easeOut})},a.prototype.showBar=function(a){return TweenLite.to(this.loaderBar.getChildByName(a),2.5,{alpha:1,ease:Quart.easeOut})},window.Preloader=a,a}(),moduleKeywords=["extended","included"],Module=function(){function a(){}return a.extend=function(a,b){var c,d,e;for(c in b)e=b[c],indexOf.call(moduleKeywords,c)<0&&(a[c]=e);return null!=(d=b.extended)&&d.apply(a),a},a.include=function(a,b){var c,d,e;for(c in b)e=b[c],indexOf.call(moduleKeywords,c)<0&&(a.prototype[c]=e);return null!=(d=b.included)&&d.apply(a),a},window.Module=a,a}(),MainContainer=function(){function a(){this.warningComplete=bind(this.warningComplete,this),this.initialize()}return a.prototype=new createjs.Container,a.prototype.Container_initialize=a.prototype.initialize,a.prototype.initialize=function(){return Module.extend(this,d2oda.methods),this.Container_initialize(),this.name="mainContainer",this.regX=d2oda.stage.w/2,this.regY=d2oda.stage.h/2},a.prototype.warning=function(){return createjs.Sound.play("s/wrong"),this.prevX=this.x,TweenMax.to(this,.1,{x:this.x+10,repeat:6,yoyo:!0,onComplete:this.warningComplete}),this},a.prototype.warningComplete=function(){return this.x=this.prevX},window.MainContainer=a,a}(),Observer=function(){function a(){this.subscribers=[]}return a.prototype.notify=function(a){var b,c,d,e,f;for(d=this.subscribers,e=[],b=0,c=d.length;c>b;b++)f=d[b],f.item===a&&e.push(f.callback(a));return e},a.prototype.subscribe=function(a,b){return this.subscribers.push({item:a,callback:b})},a}(),GameObserver=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return extend(b,a),b.NEXT_SCENE="next_scene",b.PREV_SCENE="prev_scene",b.START="start",window.GameObserver=b,b}(Observer),Game=function(){function a(a){this.prevScene=bind(this.prevScene,this),this.nextScene=bind(this.nextScene,this),this.initialize(a)}return a.prototype=new createjs.EventDispatcher,a.prototype.EventDispatcher_initialize=a.prototype.initialize,a.prototype.initialize=function(a){return this.observer=new GameObserver,this.setHeader(a.header).setInstructions(a.instructions).setScenes(a.scenes).setScore(a.score)},a.prototype.setHeader=function(a){return lib.mainContainer.insertBitmap("header",a,d2oda.stage.w/2,0,"tc"),lib.header.set({scaleX:.5,scaleY:.5}),TweenLite.from(lib.header,.5,{alpha:0,y:lib.header.y-20}),this},a.prototype.setInstructions=function(a){return lib.instructions=new Instructions(a),lib.mainContainer.add(lib.instructions,!1),a.states.length>1&&(this.observer.subscribe(GameObserver.NEXT_SCENE,lib.instructions.next),this.observer.subscribe(GameObserver.PREV_SCENE,lib.instructions.prev)),this},a.prototype.setScore=function(a){return lib.score=new Score(a),lib.mainContainer.add(lib.score),this},a.prototype.setScenes=function(a){return lib.scenes=new SceneStack(a),lib.mainContainer.add(lib.scenes,!1),this.observer.subscribe(GameObserver.NEXT_SCENE,lib.scenes.next),this.observer.subscribe(GameObserver.PREV_SCENE,lib.scenes.prev),this},a.prototype.start=function(){return lib.scene.init(),lib.scenes.addEventListener("complete",this.finish)},a.prototype.finish=function(){return oda.endGame()},a.prototype.nextScene=function(){return this.observer.notify(GameObserver.NEXT_SCENE)},a.prototype.prevScene=function(){return this.observer.notify(GameObserver.PREV_SCENE)},window.Game=a,a}(),ComponentGroup=function(){function a(a){Module.extend(this,d2oda.methods),this.name=a.id,this.group=a.group,this.current=0,a.invisible&&this.setInvisible(!0,!1)}return a.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;switch(console.log(this.name,a),a.type){case"blinkAll":for(q=this.group,E=[],e=0,f=q.length;f>e;e++)d=q[e],E.push(lib[d].blink());return E;case"pulseAll":for(r=this.group,F=[],l=0,g=r.length;g>l;l++)d=r[l],F.push(lib[d].pulse());return F;case"pulse":for(w=this.group,m=0,h=w.length;h>m;m++)d=w[m],TweenMax.killTweensOf(lib[d]),TweenLite.killTweensOf(lib[d]);if(a.target)return lib[a.target].pulse();break;case"blink":for(x=this.group,n=0,i=x.length;i>n;n++)d=x[n],TweenMax.killTweensOf(lib[d]),TweenLite.killTweensOf(lib[d]),a.end&&lib[d].ended&&TweenLite.set(lib[d],a.end);if(a.target)return a.end&&(lib[a.target].ended=!0),lib[a.target].blink();break;case"fadeIn":for(y=this.group,o=0,j=y.length;j>o;o++)d=y[o],TweenMax.killTweensOf(lib[d]),TweenLite.killTweensOf(lib[d]),lib[d].alpha=0,a.target||(c=null!=(z=a.ignoreY)?z:!1,b=null!=(A=a.ignoreCurrentAlpha)?A:!1,lib[d].fadeIn(c,b));if(a.target)return c=null!=(B=a.ignoreY)?B:!1,b=null!=(C=a.ignoreCurrentAlpha)?C:!1,lib[a.target].fadeIn(c,b);break;case"fadeOut":for(D=this.group,p=0,k=D.length;k>p;p++)d=D[p],TweenMax.killTweensOf(lib[d]),TweenLite.killTweensOf(lib[d]),a.target||(c=null!=(s=a.ignoreY)?s:!1,b=null!=(t=a.ignoreCurrentAlpha)?t:!1,lib[d].fadeOut(c,b));if(a.target)return c=null!=(u=a.ignoreY)?u:!1,b=null!=(v=a.ignoreCurrentAlpha)?v:!1,lib[a.target].fadeOut(c,b);break;case"success":return this.target=a.targetGroup,this.next=a.nextGroup,this.success=a.success,lib[this.target].setInvisible(),lib[this.next].setInvisible(),this.setInvisible(!1);case"choose":return this.setInvisible(!1);case"hide":return this.setInvisible()}},a.prototype.setInvisible=function(a,b){var c,d,e,f,g,h,i,j,k;if(null==a&&(a=!0),null==b&&(b=!0),a){for(h=this.group,j=[],d=0,e=h.length;e>d;d++)c=h[d],j.push(b?TweenLite.to(lib[c],.5,{alpha:0}):lib[c].alpha=0);return j}for(i=this.group,k=[],g=0,f=i.length;f>g;g++)c=i[g],k.push(b?TweenLite.to(lib[c],.5,{alpha:1}):lib[c].alpha=1);return k},a.prototype.doSwitch=function(){return lib[this.target].update({type:"fadeIn",target:this.success}),lib[this.next].setInvisible(!1),this.setInvisible()},a.prototype.doChoose=function(a){return this.choosen=a},a.prototype.isComplete=function(){return!0},window.ComponentGroup=a,a}(),ComponentObserver=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return extend(b,a),b.UPDATED="component_update",window.ComponentObserver=b,b}(Observer),Component=function(){function a(){}return a.prototype.next=function(){},a.prototype.prev=function(){},a.prototype.update=function(){},a}(),Score=function(a){function b(a){this.minusOne=bind(this.minusOne,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=a.x,this.y=a.y,this.counter=a.init,this.type=a.type,a.type){case"points":return this.block=!1,c=this.createBitmap("front",a.aimg,0,0),b=this.createBitmap("back",a.bimg,0,0),this.count=this.createText("init",a.init,"24px Quicksand",a.acolor,0,0,"center"),this.total=this.createText("total",a.total,"24px Quicksand",a.bcolor,0,0,"center"),b.x=c.width/4*2,b.y=c.height/4*2,this.total.x=b.x+b.width/2,this.total.y=b.y+b.height/2-this.total.getMeasuredHeight()/2,this.count.x=c.x+c.width/2,this.count.y=c.y+c.height/2-this.count.getMeasuredHeight()/2,this.addChild(b,c,this.count,this.total);case"clock":return c=this.createBitmap("front",a.aimg,0,0),this.count=this.createText("init",a.init,"24px Quicksand",a.acolor,0,0,"center"),this.count.x=c.x+c.width/2,this.count.y=c.y+c.height/2-this.count.getMeasuredHeight()/2,this.addChild(c,this.count)}},b.prototype.start=function(){return this.interval=setInterval(this.minusOne,1e3)},b.prototype.stop=function(){return clearInterval(this.interval)},b.prototype.reset=function(){return this.counter=0,this.updateCount(this.counter)},b.prototype.minusOne=function(){return this.counter--,this.updateCount(this.counter),0===this.counter?(this.stop(),this.dispatchEvent({type:"count_complete"})):void 0},b.prototype.plusOne=function(){return createjs.Sound.play("s/good"),this.block===!0?void(this.block=!1):(this.counter++,this.updateCount(this.counter))},b.prototype.enableBlock=function(){return this.block=!0},b.prototype.updateTotal=function(a){return this.total.text=a},b.prototype.updateCount=function(a){return this.count.text=a},window.Score=b,b}(Component),Instructions=function(a){function b(a){this.instructionsComplete=bind(this.instructionsComplete,this),this.prev=bind(this.prev,this),this.next=bind(this.next,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i;if(this.Container_initialize(),this.x=a.x,this.y=a.y,this.states=a.states,this.playing=!1,this.currentState=0,this.custom=null!=(f=this.states[this.currentState].custom)?f:!1,i=new createjs.Shape,i.graphics.beginFill("#bcd748").moveTo(0,0).lineTo(8,5).lineTo(0,10),i.y=5,this.custom===!0)for(b=0,e=14,g=this.states[this.currentState].text,c=0,d=g.length;d>c;c++)h=g[c],"#ital"===h?(this.label=new createjs.Text(this.states[this.currentState].italics[b],"Bold italic 25px Browallia New","#000"),b++):this.label=new createjs.Text(h,"25px Browallia New","#000"),this.label.x=e,this.addChild(this.label),console.log(this.label),e=e+this.label.getMeasuredWidth()+5;else this.label=new createjs.Text(this.states[this.currentState].text,"25px Browallia New","#000"),this.label.x=14,this.addChild(this.label);return this.addChild(i),TweenLite.from(this,.5,{alpha:0,x:this.x-20})},b.prototype.playSound=function(){var a;return this.states[this.currentState].played?void 0:(this.playing=!0,this.states[this.currentState].played=!0,createjs.Sound.stop(),a=createjs.Sound.play(this.states[this.currentState].sound),a.addEventListener("complete",this.instructionsComplete),a)},b.prototype.next=function(){return this.currentState++,this.states.length>1&&this.currentState<this.states.length?(this.label.text=this.states[this.currentState].text,TweenLite.from(this,.5,{alpha:0,x:this.x-20}),this.playSound()):void 0},b.prototype.prev=function(){return this.currentState--,this.currentState>=0?(this.label.text=this.states[this.currentState].text,TweenLite.from(this,.5,{alpha:0,x:this.x-20})):this.currentState++},b.prototype.instructionsComplete=function(){return this.playing=!1,console.log("instructions complete"),this.dispatchEvent({type:"complete"})},window.Instructions=b,b}(Component),WriteContainer=function(a){function b(a){this.openPrompt=bind(this.openPrompt,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k;return this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),this.x=a.x,this.y=a.y,this.name=null!=(e=a.name)?e:a.id,d=null!=(f=a.font)?f:"Arial 20px",c=null!=(g=a.color)?g:"#333",this.stroke=null!=(h=a.stroke)?h:3,this.scolor=null!=(i=a.scolor)?i:"#333",this.bcolor=null!=(j=a.bcolor)?j:"#FFF",b=null!=(k=a.align)?k:"",this.mainText=this.createText("#{@name}_main","",d,c,0,0,b),this.pastText=this.createText("#{@name}_past","",d,c,0,this.mainText.getMeasuredHeight()+a.margin,b),this.pastText.text="",this.back=new createjs.Shape,this.back.y=this.mainText.getMeasuredHeight()+a.margin,this.add(this.back,!1),this.add(this.pastText,!1),this.add(this.mainText,!1),this.addEventListener("click",this.openPrompt)},b.prototype.openPrompt=function(){var a;return a=prompt("Enter the past simple form of "+this.mainText.text),this.pastText.text=a,a.toLowerCase()===this.success.toLowerCase()?this.complete=!0:void 0
},b.prototype.update=function(a){return this.children[3]&&this.removeChildAt(3),this.pastText.text=a.success,this.mainText.text=a.text,this.success=a.success,this.complete=!1,this.back.graphics.c().f(this.bcolor).dr(0,0,this.pastText.getMeasuredWidth(),this.pastText.getMeasuredHeight()).ss(this.stroke).s(this.scolor).mt(0,this.pastText.getMeasuredHeight()).lt(this.pastText.getMeasuredWidth(),this.pastText.getMeasuredHeight()),this.back.x=-this.pastText.getMeasuredWidth()/2,this.pastText.text="",TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.getBounds().width,this.getBounds().height/2,"ml"):this.insertBitmap("wrong","wrong",this.getBounds().width,this.getBounds().height/2,"ml")},b.prototype.isComplete=function(){return!0},b}(Component),ImageContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g;return this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),b=null!=(d=a.align)?d:"",this.name=null!=(e=a.name)?e:a.id,this.x=a.x,this.y=a.y,this.scaleX=null!=(f=a.scale)?f:1,this.scaleY=null!=(g=a.scale)?g:1,c=this.createBitmap(this.name,a.id,0,0,b),this.width=c.width,this.height=c.height,this.mouseEnabled=!0,this.add(c,!1)},b.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,!0},b}(Component),TextContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k;return this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),d=null!=(e=a.font)?e:"20px Arial",c=null!=(f=a.fcolor)?f:"#333",b=null!=(g=a.align)?g:"",this.name=null!=(h=a.name)?h:a.id,this.x=a.x,this.y=a.y,this.scaleX=null!=(i=a.scale)?i:1,this.scaleY=null!=(j=a.scale)?j:1,k=this.createText(this.name,a.text,d,c,0,0,b),a.lineWidth&&(k.lineWidth=a.lineWidth),this.width=k.getMeasuredWidth(),this.height=k.getMeasuredHeight(),this.mouseEnabled=!0,this.add(k,!1)},b.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,!0},b}(Component),SpriteContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f;return this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),b=null!=(c=a.align)?c:"",this.name=null!=(d=a.name)?d:a.id,this.x=a.x,this.y=a.y,this.scaleX=null!=(e=a.scale)?e:1,this.scaleY=null!=(f=a.scale)?f:1,this.sprite=this.createSprite("sp_"+this.name,a.imgs,a.frames,0,0,b),this.width=this.sprite.width,this.height=this.sprite.height,this.mouseEnabled=!0,this.droptargets=new Array,this.observer=new ComponentObserver,this.add(this.sprite,!1)},b.prototype.prevFrame=function(){return this.sprite.currentFrame--},b.prototype.nextFrame=function(){return this.sprite.currentFrame++},b.prototype.nextStep=function(){return this.storyboard.length>0?this.sprite.animation.gotoAndStop(this.storyboard[this.sprite.animation.currentFrame]):void 0},b.prototype["goto"]=function(a){return this.sprite.animation.gotoAndStop(a)},b.prototype.update=function(a){return this.droptargets=[this.sprite],this.success=a.success,this.storyboard=a.storyboard,a["goto"]&&this["goto"](a["goto"]),this.observer.notify(ComponentObserver.UPDATED)},b.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),0!==this.alpha&&(this.alpha=1),this.sprite.animation.currentFrame>0},b}(Component),DragContainer=function(a){function b(a){this.evaluateDrop=bind(this.evaluateDrop,this),this.handleMouseDown=bind(this.handleMouseDown,this),this.update=bind(this.update,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),Module.extend(this,d2oda.utilities),this.name=null!=(e=a.name)?e:a.id,this.x=a.x,this.y=a.y,this.scaleX=this.scaleY=null!=(f=a.scale)?f:1,this.pos={x:this.x,y:this.y},this.index=a.index,this.eval=a.eval,this.droptargets=new Array,b=this.createBitmap(this.name,a.id,0,0),this.bmpname=a.name,this.bmpid=a.id,this.width=b.width,this.height=b.height,this.setPosition(a.align),a.afterSuccess){case"hide":this.afterSuccess=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterSuccess=this.returnToPlace;break;case"origin":this.afterSuccess=this.setInOrigin}switch(a.afterFail){case"hide":this.afterFail=this.hide;break;case"inplace":this.afterFail=this.putInPlace;break;case"return":this.afterFail=this.returnToPlace;break;case"origin":this.afterFail=this.setInOrigin}if(this.add(b,!1),this.target=this.isArray(a.target)?a.target:lib[a.target],this.target)if(this.isArray(this.target))for(g=this.target,c=0,d=g.length;d>c;c++)h=g[c],lib[h].observer.subscribe(ComponentObserver.UPDATED,this.update);else this.target.observer.subscribe(ComponentObserver.UPDATED,this.update);return this.on("mousedown",this.handleMouseDown)},b.prototype.update=function(){var a,b,c,d,e;if(this.isArray(this.target)){for(a=new Array,d=this.target,b=0,c=d.length;c>b;b++)e=d[b],a.merge(lib[e].droptargets);return this.droptargets=a}return this.droptargets=this.target.droptargets},b.prototype.handleMouseDown=function(a){var b,c,d;return c=a.stageX/d2oda.stage.r,d=a.stageY/d2oda.stage.r,b={x:c-this.x,y:d-this.y},this.x=c-b.x,this.y=d-b.y,this.on("pressmove",function(a){return function(e){return c=e.stageX/d2oda.stage.r,d=e.stageY/d2oda.stage.r,a.x=c-b.x,a.y=d-b.y,!1}}(this)),this.on("pressup",function(b){return function(){return b.removeAllEventListeners("pressmove"),b.removeAllEventListeners("pressup"),b.droptargets&&b.droptargets.length>0?b.evaluateDrop(a):b.dispatchEvent({type:"drop"}),!1}}(this)),!1},b.prototype.evaluateDrop=function(){var a,b,c,d,e,f,g,h,i;for(i=null,c=!1,g=this.droptargets,d=0,e=g.length;e>d;d++)a=g[d],f=a.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),b=null!=(h=a.hitTester)?h:a,b.hitTest(f.x,f.y)&&(b.animation||b.parent.animation?(console.log(a.parent.alpha),a.parent.alpha>0&&(i=a,c=!0)):(i=a,c=!0)),console.log(c,i);return c?(d2oda.evaluator.evaluate(this.eval,this.name,i),this.dispatchEvent({type:"dropped",drop:i})):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},b}(Component),ButtonContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e;return this.Container_initialize(),Module.extend(this,d2oda.actions),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.utilities),this.x=a.x,this.y=a.y,this.txtFont="20px Arial",this.txtColor="#333",this.txtAlign="left",this.index=a.index,this.name=null!=(b=a.name)?b:a.id,this.scale=this.scaleX=this.scaleY=null!=(c=a.scale)?c:1,this.states=a.states,this.currentState=0,this.overTween=null!=(d=a.overTween)?d:!0,this.setImageText(this.states[this.currentState].img,this.states[this.currentState].txt),this.alpha=null!=(e=a.alpha)?e:1,this.target=this.isArray(a.target)?a.target:lib[a.target],a.target&&(this.target=lib[a.target]),this.overTween&&(this.addEventListener("mouseover",function(b){return function(){return a.overScale?TweenLite.to(b,.5,{scaleX:a.overScale,scaleY:a.overScale}):TweenLite.to(b,.5,{scaleX:1.2,scaleY:1.2})}}(this)),this.addEventListener("mouseout",function(a){return function(){return TweenLite.to(a,.5,{scaleX:a.scale,scaleY:a.scale})}}(this))),this.addEventListener("click",function(b){return function(){return a.isRepeat?d2oda.evaluator.evaluate("repeat"):a.isFinish?d2oda.evaluator.evaluate("finish",null,a.target):d2oda.evaluator.evaluate(a.eval,b.name,a.target)}}(this))},b.prototype.setImageText=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(this.removeAllChildren(),this.alpha=1,a&&(q=null!=(f=a.x)?f:0,r=null!=(g=a.y)?g:0,c=null!=(h=a.align)?h:"",d=this.createBitmap("#{@name}_img",a.name,q,r,c),a.scale&&(d.scaleX=d.scaleY=a.scale),this.add(d,!1)),b){switch(p=null!=(i=b.text)?i:"",this.txtFont=null!=(j=b.font)?j:this.txtFont,this.txtColor=null!=(k=b.color)?k:this.txtColor,q=null!=(l=b.x)?l:0,r=null!=(m=b.y)?m:0,this.txtAlign=null!=(n=b.align)?n:this.txtAlign,o=this.createText("#{@name}_txt",p,this.txtFont,this.txtColor,q,r,this.txtAlign),b.lineWidth&&(o.lineWidth=b.lineWidth),e=new createjs.Shape,this.txtAlign){case"left":e.graphics.beginFill("#000").drawRect(-5,-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6);break;case"center":e.graphics.beginFill("#000").drawRect(-5-o.getMeasuredWidth()/2,-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6);break;case"right":e.graphics.beginFill("#000").drawRect(-5-o.getMeasuredWidth(),-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6)}return o.hitArea=e,this.add(o,!1)}},b.prototype.updateState=function(){return this.currentState++,this.currentState<this.states.length?(TweenLite.killTweensOf(this),this.setImageText(this.states[this.currentState].img,this.states[this.currentState].txt),this.scaleX=this.scaleY=this.scale,this.states[this.currentState].removeListeners&&this.removeAllEventListeners(),TweenLite.from(this,.3,{alpha:0})):this.currentState--},b.prototype.update=function(a){return TweenLite.killTweensOf(this),this.setImageText(a.img,a.txt),this.mouseEnabled=!0,TweenLite.from(this,.5,{alpha:0})},b.prototype.isComplete=function(){return!0},b}(Component),ChooseContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=a.x,this.y=a.y,this.name=null!=(b=a.name)?b:a.id,this.target=a.target,this.eval=a.eval,this.label=a.label,this.caption=a.caption,this.bullets=a.bullets,this.complete=!1},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l;switch(this.removeAllChildren(),this.complete=!1,a.type){case"img":g=this.createBitmap(this.name+"_opt1",a.opt1,0,100,"tr"),g.index=1,h=this.createBitmap(this.name+"_opt2",a.opt2,0,100),h.index=2;break;case"txt":a.img&&(b=this.insertBitmap(this.name+"_img",a.img.name,a.img.x,a.img.y,"tc"),a.img.scale&&(b.scaleY=b.scaleX=a.img.scale)),f=this.bullets.lineWidth?this.bullets.lineWidth:200,this.insertText("separator","/",this.bullets.font,this.bullets.color,0,400,"center"),g=this.createText(this.name+"_opt1",a.opt1,this.bullets.font,this.bullets.color,-20,400,"right"),this.bullets.lineWidth&&(g.lineWidth=this.bullets.lineWidth),c=new createjs.Shape,c.graphics.beginFill("#000").drawRect(-g.getMeasuredWidth()-5,-3,g.getMeasuredWidth()+10,g.getMeasuredHeight()+6),g.hitArea=c,g.index=1,h=this.createText(this.name+"_opt2",a.opt2,this.bullets.font,this.bullets.color,20,400,"left"),this.bullets.lineWidth&&(h.lineWidth=this.bullets.lineWidth),d=new createjs.Shape,d.graphics.beginFill("#000").drawRect(-5,-3,h.getMeasuredWidth()+10,h.getMeasuredHeight()+6),h.hitArea=d,h.index=2;break;case"mtxt":a.img&&(b=this.insertBitmap(this.name+"_img",a.img.name,a.img.x,a.img.y,"tc"),a.img.scale&&(b.scaleY=b.scaleX=a.img.scale)),f=this.bullets.lineWidth?this.bullets.lineWidth:200,g=this.createText(this.name+"_opt1",a.opt1,this.bullets.font,this.bullets.color,0,300,"center"),this.bullets.lineWidth&&(g.lineWidth=this.bullets.lineWidth),c=new createjs.Shape,c.graphics.beginFill("#000").drawRect(-g.getMeasuredWidth()/2-5,-3,g.getMeasuredWidth()+10,g.getMeasuredHeight()+6),g.hitArea=c,g.index=1,h=this.createText(this.name+"_opt2",a.opt2,this.bullets.font,this.bullets.color,0,g.y+g.getMeasuredHeight()+10,"center"),this.bullets.lineWidth&&(h.lineWidth=this.bullets.lineWidth),d=new createjs.Shape,d.graphics.beginFill("#000").drawRect(-h.getMeasuredWidth()/2-5,-3,h.getMeasuredWidth()+10,h.getMeasuredHeight()+6),h.hitArea=d,h.index=2,i=this.createText(this.name+"_opt3",a.opt3,this.bullets.font,this.bullets.color,0,h.y+h.getMeasuredHeight()+10,"center"),this.bullets.lineWidth&&(i.lineWidth=this.bullets.lineWidth),e=new createjs.Shape,e.graphics.beginFill("#000").drawRect(-i.getMeasuredWidth()/2-5,-3,i.getMeasuredWidth()+10,i.getMeasuredHeight()+6),i.hitArea=e,i.index=3}return this.add(g),g.addEventListener("mouseover",function(){return function(){return TweenLite.to(g,.5,{alpha:.5})}}(this)),g.addEventListener("mouseout",function(){return function(){return TweenLite.to(g,.5,{alpha:1})}}(this)),g.addEventListener("click",function(a){return function(){return d2oda.evaluator.evaluate(a.eval,a.name+"_opt1",a.target)}}(this)),this.add(h),h.addEventListener("mouseover",function(){return function(){return TweenLite.to(h,.5,{alpha:.5})}}(this)),h.addEventListener("mouseout",function(){return function(){return TweenLite.to(h,.5,{alpha:1})}}(this)),h.addEventListener("click",function(a){return function(){return d2oda.evaluator.evaluate(a.eval,a.name+"_opt2",a.target)}}(this)),i&&(this.add(i),i.addEventListener("mouseover",function(){return function(){return TweenLite.to(i,.5,{alpha:.5})}}(this)),i.addEventListener("mouseout",function(){return function(){return TweenLite.to(i,.5,{alpha:1})}}(this)),i.addEventListener("click",function(a){return function(){return d2oda.evaluator.evaluate(a.eval,a.name+"_opt3",a.target)}}(this))),a.label&&(l=null!=(j=a.ly)?j:40,this.insertText(this.name+"_label",a.label,this.label.font,this.label.color,0,l,"center")),a.caption&&(l=null!=(k=a.cy)?k:360,this.insertText(this.name+"_caption",a.caption,this.caption.font,this.caption.color,0,l,"center")),TweenLite.from(this,.5,{alpha:0})},b.prototype.isComplete=function(){return!0},b}(Component),LabelContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=a.x,this.y=a.y,this.name=null!=(e=a.name)?e:a.id,d=null!=(f=a.font)?f:"Arial 20px",c=null!=(g=a.color)?g:"#333",b=null!=(h=a.align)?h:"",this.text=this.createText("txt","",d,c,0,0,b),this.add(this.text,!1)},b.prototype.update=function(a){return this.text.text=a.text,this.success=a.success,this.complete=!1,TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){return this.complete},b}(Component),CloneCompleterContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.name=null!=(b=a.name)?b:a.id,this.x=null!=(c=a.x)?c:0,this.y=null!=(d=a.y)?d:0,this.uwidth=null!=(e=a.uwidth)?e:100,this.uheight=null!=(f=a.uheight)?f:100,this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h,i;for(this.removeAllChildren(),this.droptargets=new Array,e=0,h=0,i=a.containers,f=0,g=i.length;g>f;f++)b=i[f],d=b.opts?b.opts:a,c=new CloneContainer(d,b.type,b.success,b.x,b.y,this.uwidth,this.uheight),this.droptargets.push(c),this.add(c,!1);return this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){return!0},b}(Component),CloneContainer=function(a){function b(a,b,c,d,e,f,g){this.initialize(a,b,c,d,e,f,g)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d,e,f,g){var h,i;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.name=null!=(i=a.name)?i:a.id,this.x=null!=d?d:0,this.y=null!=e?e:0,this.width=f,this.height=g,this.success=c,this.complete="#empty"!==this.success?!1:!0,this.img=null,h=new createjs.Shape,h.graphics.beginFill("#FFF").drawRect(0,0,this.width,this.height),h.alpha=.1,this.add(h,!1)},b.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},b.prototype.update=function(a,b){return null==a&&(a=!0),null==b&&(b=""),null!==this.img&&this.removeChild(this.img),this.img=this.createBitmap("img",b,this.width/2,this.height/2,"mc"),this.img.scaleX=this.img.scaleY=(this.height-5)/this.img.height,this.add(this.img,!1),this.hitTester=this.img.hitTester,this.complete=a},b}(Component),StepsContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.name=null!=(b=a.name)?b:a.id,this.x=null!=(c=a.x)?c:0,this.y=null!=(d=a.y)?d:0,this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h,i;for(this.removeAllChildren(),e=0,h=0,i=a.containers,f=0,g=i.length;g>f;f++)b=i[f],d=b.opts?b.opts:a,c=new StepContainer(d,b.type,b.success,b.x,b.y),this.droptargets.push(c),this.add(c,!1);return this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){return!0},b}(Component),StepContainer=function(a){function b(a,b,c,d,e){this.initialize(a,b,c,d,e)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d,e){var f,g,h;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=null!=d?d:0,this.y=null!=e?e:0,this.width=null!=(g=a.width)?g:a.radius,this.height=null!=(h=a.height)?h:a.radius,this.success=c,this.complete=!1,b){case"rshp":f=new createjs.Shape,f.graphics.beginFill(a.bcolor).setStrokeStyle(a.stroke).beginStroke(a.scolor).drawRoundRect(0,0,a.width,a.height,a.radius)}return this.add(f,!1)},b.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},b.prototype.update=function(a){return null==a&&(a=!0),this.complete=a},b}(Component),GridContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.utilities),this.x=null!=(k=a.x)?k:0,this.y=null!=(l=a.y)?l:0,this.columns=null!=(p=a.columns)?p:1,this.rows=null!=(q=a.rows)?q:1,this.uwidth=null!=(r=a.uwidth)?r:100,this.uheight=null!=(s=a.uheight)?s:100,this.name=null!=(t=a.name)?t:a.id,this.currentTarget=0,this.warnings=0,this.targets=new Array,a.label&&(h=null!=(u=a.label.font)?u:"Arial 20px",e=null!=(v=a.label.color)?v:"#333",b=null!=(w=a.label.align)?w:"",y=null!=(m=a.label.x)?m:0,z=null!=(n=a.label.y)?n:0,this.text=this.createText("txt","",h,e,y,z,b),this.add(this.text)),this.cells=a.mixed?this.shuffle(a.cells):a.cells,a.align){case"evenodd":for(f=0,g=0,o=this.cells,x=[],i=0,j=o.length;j>i;i++)d=o[i],y=g%2===0?f*this.uwidth:(this.columns-1-f)*this.uwidth,c=this.insertBitmap(d.img,d.img,y,g*this.uheight,"mc"),c.scaleX=c.scaleY=.5,this.targets.push(c),f++,f===this.columns?(f=0,x.push(g++)):x.push(void 0);return x}},b.prototype.update=function(){var a;return a=this.cells[this.currentTarget],this.success=a.success,this.text.text=a.txt,this.targets[this.currentTarget].complete=!1,this.blink(this.targets[this.currentTarget]),TweenLite.from(this.text,.3,{alpha:0,y:this.text.y-10})},b.prototype.fadeOut=function(a){return TweenMax.killTweensOf(a),TweenLite.killTweensOf(a),TweenLite.to(a,.5,{alpha:0,y:a.y-20})},b.prototype.blink=function(a,b){var c;return null==b&&(b=!0),TweenMax.killTweensOf(a),c=1,b?TweenMax.to(a,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},b.prototype.isComplete=function(){var a,b,c,d;for(c=this.targets,a=0,b=c.length;b>a;a++)if(d=c[a],d.complete===!1)return!1;return!0},b}(Component),PhraseCompleterContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k;return this.Container_initialize(),Module.extend(this,d2oda.actions),Module.extend(this,d2oda.methods),this.x=a.x,this.y=a.y,this.margin=null!=(b=a.margin)?b:10,this.font=null!=(c=a.font)?c:"20px Arial",this.fcolor=null!=(d=a.fcolor)?d:"#333",this.bcolor=null!=(e=a.bcolor)?e:"#FFF",this.scolor=null!=(f=a.scolor)?f:"#333",this.stroke=null!=(g=a.stroke)?g:3,this.name=null!=(h=a.name)?h:a.id,this.align=null!=(i=a.align)?i:"",this.uwidth=a.uwidth,this.underline=null!=(j=a.underline)?j:{y:5},this.clickable=null!=(k=a.clickable)?k:!0,this.lineHeight=a.lineHeight,this.currentTarget=0,this.observer=new ComponentObserver,this.droptargets=new Array,this.textlist=new Array},b.prototype.hideLabel=function(){return console.log(this.label),""!==this.label?TweenLite.to(lib[this.label],.5,{alpha:0}):void 0},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(this.removeAllChildren(),this.label=null!=(l=a.label)?l:"",a.h2&&(b=null!=(m=a.h2.align)?m:"",e=this.createText("h2",a.h2.text,this.font,this.color,a.h2.x,a.h2.y,b),this.add(e,!1)),a.nextGroup&&(this.nextGroup=a.nextGroup),g=0,k=0,r=null!=(n=a.ypos)?n:-5,j=0,o=a.pattern,h=0,i=o.length;i>h;h++)p=o[h],"#tcpt"===p?(q=a.targets[g],this.uwidth?f={text:q.text,width:this.uwidth}:(f=q,f.maxlength&&(d=this.createText("max",f.maxlength,this.font,this.fcolor,0,0),f={text:q.text,width:d.getMeasuredWidth()+this.margin})),f.underline=this.underline,f.clickable=this.clickable,d=new TextCompleterContainer(f,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,k,r),this.droptargets.push(d),this.textlist.push(d),this.add(d,!1),k+=d.width+this.margin,k>j&&(j=k),g++):"#rtn"===p?this.lineHeight?(k=0,r+=this.lineHeight):(k=0,k>j&&(j=k),this.lineHeight?r+=this.lineHeight:(d=this.createText("txt","BLANK",this.font,this.fcolor,k,0),r+=d.getMeasuredHeight()+.2*d.getMeasuredHeight())):(c=p.charAt(0),("."===c||"!"===c||"?"===c||","===c)&&(k-=this.margin),d=this.createText("txt",p,this.font,this.fcolor,k,r),this.textlist.push(d),this.add(d,!1),k+=d.getMeasuredWidth()+this.margin,k>j&&(j=k));return this.completeTarget=a.completeTarget,this.width=j,this.setPosition(this.align),this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.clearChildren=function(){var a,b,c,d,e;for(c=this.droptargets,d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(e.clearBackground());return d},b.prototype.getEnabledTarget=function(){var a,b,c,d,e;for(a={success:!1},d=this.droptargets,b=0,c=d.length;c>b;b++)e=d[b],e.writeEnabled&&(a=e);return a},b.prototype.isComplete=function(){var a,b,c,d;for(c=this.droptargets,a=0,b=c.length;b>a;a++)if(d=c[a],d.complete===!1)return!1;return!0},b}(Component),PhraseCloneContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=a.x,this.y=a.y,this.margin=null!=(b=a.margin)?b:10,this.font=null!=(c=a.font)?c:"20px Arial",this.fcolor=null!=(d=a.fcolor)?d:"#333",this.bcolor=null!=(e=a.bcolor)?e:"#FFF",this.scolor=null!=(f=a.scolor)?f:"#333",this.stroke=null!=(g=a.stroke)?g:3,this.name=null!=(h=a.name)?h:a.id,this.align=null!=(i=a.align)?i:"",this.currentTarget=0,this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(this.removeAllChildren(),a.h2&&(b=null!=(i=a.h2.align)?i:"",d=this.createText("h2",a.h2.text,this.font,this.color,a.h2.x,a.h2.y,b),this.add(d,!1)),e=0,h=0,j=a.pattern,f=0,g=j.length;g>f;f++)k=j[f],"#tcpt"===k?(l=a.targets[e],c=new TextCloneContainer(l,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,h,-5),this.droptargets.push(c),this.add(c,!1),h+=c.width+this.margin,e++):(c=this.createText("txt",k,this.font,this.fcolor,h,-5),this.add(c,!1),h+=c.getMeasuredWidth()+this.margin);return this.width=h,this.setPosition(this.align),this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){return!0},b}(Component),TextCloneContainer=function(a){function b(a,b,c,d,e,f,g,h){this.initialize(a,b,c,d,e,f,g,h)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d,e,f,g,h){var i,j,k;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=g,this.y=h,this.success=null!=(i=a.success)?i:a.text,this.text=this.createText("txt",a.text,b,c,0,-5),this.width=null!=(j=a.width)?j:this.text.getMeasuredWidth(),this.height=null!=(k=a.height)?k:this.text.getMeasuredHeight(),this.complete=!1,this.back=new createjs.Shape,this.back.graphics.f(d).dr(0,0,this.width,this.height).ss(f).s(e).mt(0,this.height).lt(this.width,this.height),this.add(this.back,!1),this.add(this.text,!1),this.text.text=""},b.prototype.setRectOutline=function(a,b,c){return this.back.graphics.f(a).ss(b).s(c).dr(0,0,this.width,this.height)},b.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},b.prototype.update=function(a,b){return null==b&&(b=!0),this.complete=b,this.text.text=a,this.text.textAlign="center",this.text.x=this.width/2,TweenLite.from(this,.3,{alpha:0})},b}(Component),WordSearchContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.name=null!=(b=a.name)?b:a.id,this.x=a.x,this.y=a.y,this.font=null!=(c=a.font)?c:"20px Arial",this.fcolor=null!=(d=a.fcolor)?d:"#333",this.bcolor=null!=(e=a.bcolor)?e:"#FFF",this.shcolor=null!=(f=a.shcolor)?f:"#F00",this.shape=null!=(g=a.shape)?g:"rect",this.uwidth=null!=(h=a.uwidth)?h:100,this.uheight=null!=(i=a.uheight)?i:100,this.radius=null!=(j=a.radius)?j:0,this.allComplete=!1,this.observer=new ComponentObserver,this.droptargets=new Array,this.path=new Array,this.addEventListener("mousedown",function(a){return function(){return a.path=new Array,a.getLetterContainer(),a.addEventListener("pressmove",function(){return a.getLetterContainer()}),a.addEventListener("pressup",function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(a.removeAllEventListeners("pressmove"),a.removeAllEventListeners("pressup"),c=!1,p=a.path.unique(),o=function(){var a,c,d;for(d=[],a=0,c=p.length;c>a;a++)b=p[a],d.push(b.name);return d}(),o.sort(),n=a.words,f=0,h=n.length;h>f;f++)if(r=n[f],r.enabled){for(g=new Array,q=r.coords.sort(),e=k=0,m=q.length;m>=0?m>k:k>m;e=m>=0?++k:--k)g[e]="l"+q[e];d=g.compare(o),d&&(c=!0,r.complete=!0,r.fx?lib[r.target][r.fx]():lib[r.target].fadeOut(),lib.scene.success())}if(!c){for(l=0,i=p.length;i>l;l++)j=p[l],j.showShape(!1);return lib.scene.fail()}}),!1}}(this))},b.prototype.getLetterContainer=function(){var a,b,c;return c=this.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),b=this.getObjectUnderPoint(c.x,c.y),a=b.parent,a&&a instanceof LetterContainer?(a.showShape(),this.path.push(a)):void 0},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k;for(this.removeAllChildren(),this.words=a.words,c=0,d=0,j=a.matrix,e=0,f=j.length;f>e;e++){for(k=j[e],h=0,g=k.length;g>h;h++)b=k[h],i=new LetterContainer({text:b,width:this.uwidth,height:this.uheight,radius:this.radius},this.font,this.fcolor,this.bcolor,this.shcolor,this.shape,d*this.uwidth,c*this.uheight),i.name="l"+d+"_"+c,this.add(i),this.droptargets.push(i),d++;d=0,c++}return this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){var a,b,c,d,e;for(a=!0,d=this.words,b=0,c=d.length;c>b;b++)e=d[b],e.complete===!1&&(a=!1);return a},b}(Component),CrossWordsContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.name=null!=(b=a.name)?b:a.id,this.x=a.x,this.y=a.y,this.font=null!=(c=a.font)?c:"20px Arial",this.fcolor=null!=(d=a.fcolor)?d:"#333",this.bcolor=null!=(e=a.bcolor)?e:"#FFF",this.stroke=null!=(f=a.stroke)?f:2,this.scolor=null!=(g=a.scolor)?g:"#FFF",this.uwidth=null!=(h=a.uwidth)?h:100,this.uheight=null!=(i=a.uheight)?i:100,this.allComplete=!1,this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(this.removeAllChildren(),this.words=a.words,f=g=1,l=this.words.length;l>=1?l>=g:g>=l;f=l>=1?++g:--g)p=this.insertText("txt"+f,""+f,this.font,this.fcolor,this.words[f-1].x,this.words[f-1].y),c=new createjs.Shape,c.graphics.beginFill("#000").drawRect(-5,-3,p.getMeasuredWidth()+10,p.getMeasuredHeight()+6),p.hitArea=c,this.words[f-1].eval&&(p.eval=this.words[f-1].eval,p.target=this.words[f-1].target,p.index=this.words[f-1].index,p.addEventListener("click",function(){return function(a){return d2oda.evaluator.evaluate(a.target.eval,a.target.name,a.target.target)}}(this)));for(d=0,e=0,m=a.matrix,j=0,h=m.length;h>j;j++){for(n=m[j],k=0,i=n.length;i>k;k++)b=n[k],"#"!==b&&("-"===b?(o=new createjs.Shape,o.graphics.f("#999").ss(this.stroke).s(this.scolor).dr(0,0,this.uwidth,this.uheight),o.x=e*this.uwidth,o.y=d*this.uheight):(o=new TextCompleterContainer({text:b,width:this.uwidth,height:this.uheight,crossword:!0},this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,e*this.uwidth,d*this.uheight),o.name="l"+e+d,o.setRectOutline(this.bcolor,this.stroke,this.scolor)),this.add(o),this.droptargets.push(o)),e++;e=0,d++}return this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.fadeOut=function(a){return TweenMax.killTweensOf(a),TweenLite.killTweensOf(a),TweenLite.to(a,.5,{alpha:0,y:a.y-20})},b.prototype.evaluateWords=function(){var a,b,c,d,e,f,g,h,i,j;for(g=this.words,h=[],b=0,c=g.length;c>b;b++){for(i=g[b],a=i.coords,j=!0,e=0,d=a.length;d>e;e++)f=a[e],lib["l"+f].complete||(j=!1);i.complete?h.push(void 0):j?(i.complete=!0,lib[i.target]&&this.fadeOut(lib[i.target]),lib["number"+i.target]&&this.fadeOut(lib["number"+i.target]),createjs.Sound.play("s/"+i.target),h.push(lib.scene.success())):h.push(void 0)}return h},b.prototype.isComplete=function(){var a,b,c,d;for(this.allComplete=!0,c=this.words,a=0,b=c.length;b>a;a++)d=c[a],d.complete||(this.allComplete=!1);return this.allComplete},b}(Component),ABCContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(this.Container_initialize(),Module.extend(this,d2oda.methods),this.name=null!=(l=a.name)?l:a.id,this.x=a.x,this.y=a.y,this.eval=a.eval,this.target=a.target,d="abcdefghijklmnopqrstuvwxyz",e=d.split(""),this.abccollection=new Array,g=0,h=0,i=e.length;i>h;h++)j=e[h],g>=13?(b=(g-13)*(a.uwidth+a.margin),c=a.uheight):(b=g*(a.uwidth+a.margin),c=0),a.clickable?(k={id:"abc_"+g,x:b,y:c,index:j,target:this.target,eval:this.eval,states:[{txt:{text:j,font:a.font,color:a.fcolor}}]},f=new ButtonContainer(k)):(k={id:"abc_"+g,x:b,y:c,index:j,target:this.target,eval:this.eval,text:j,font:a.font,color:a.fcolor,afterSuccess:"origin",afterFail:"return"},f=new LetterDragContainer(k)),this.abccollection.push(f),this.add(f),g++;
return this.width=b+a.uwidth,this.height=2*c,this.setPosition("mc"),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.update=function(a){var b,c,d,e,f;if(a.reset){for(e=this.abccollection,f=[],b=0,c=e.length;c>b;b++)d=e[b],f.push(d.visible=!0);return f}},b.prototype.isComplete=function(){return!0},b}(Component),WordCompleterContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j;return this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.utilities),this.name=null!=(b=a.name)?b:a.id,this.x=a.x,this.y=a.y,this.uwidth=null!=(c=a.uwidth)?c:25,this.bcolor=null!=(d=a.bcolor)?d:"#FFF",this.scolor=null!=(e=a.scolor)?e:"#333",this.fcolor=null!=(f=a.fcolor)?f:"#333",this.font=null!=(g=a.font)?g:"20px Arial",this.stroke=null!=(h=a.stroke)?h:3,this.align=null!=(i=a.align)?i:"",this.margin=null!=(j=a.margin)?j:5,this.eval=a.eval,this.currentTarget=0,this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h;for(this.removeAllChildren(),this.droptargets=new Array,this.target=a.target,h=a.word.split(""),c=0,a.prev?(this.prev=this.insertText("prevTxt",a.prev,this.font,this.fcolor,0,0),g=this.prev.getMeasuredWidth()+this.margin):g=0,d=0,e=h.length;e>d;d++)f=h[d]," "===f?g+=2*this.margin:(a={text:f,width:this.uwidth},b=new TextCompleterContainer(a,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,g,5),this.droptargets.push(b),this.add(b,!1),g+=this.uwidth+this.margin),c++;return this.width=g,this.setPosition(this.align),c=0,g=this.prev?this.prev.getMeasuredWidth()+this.margin:0,this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){var a,b,c,d;for(c=this.droptargets,a=0,b=c.length;b>a;a++)if(d=c[a],d.complete===!1)return!1;return!0},b}(Component),ScrambledWordContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k;return this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),Module.extend(this,d2oda.utilities),this.name=null!=(b=a.name)?b:a.id,this.x=a.x,this.y=a.y,this.uwidth=null!=(c=a.uwidth)?c:25,this.bcolor=null!=(d=a.bcolor)?d:"#FFF",this.scolor=null!=(e=a.scolor)?e:"#333",this.fcolor=null!=(f=a.fcolor)?f:"#333",this.font=null!=(g=a.font)?g:"20px Arial",this.stroke=null!=(h=a.stroke)?h:3,this.align=null!=(i=a.align)?i:"",this.margin=null!=(j=a.margin)?j:5,this.oncomplete=null!=(k=a.oncomplete)?k:null,this.eval=a.eval,this.currentTarget=0,this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(this.removeAllChildren(),this.target=a.target,this.fx=null!=(k=a.fx)?k:"fadeOut",o=a.word.split(""),n=this.shuffle(o),d=0,a.prev?(this.prev=this.insertText("prevTxt",a.prev,this.font,this.fcolor,0,0),j=this.prev.getMeasuredWidth()+this.margin):j=0,e=0,f=o.length;f>e;e++)h=o[e]," "===h?j+=this.margin:(a={text:h,width:this.uwidth},c=new TextCompleterContainer(a,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,j,5),this.droptargets.push(c),this.add(c,!1),j+=this.uwidth+this.margin),d++;for(l=this.insertText("period",".",this.font,this.fcolor,c.x+c.width+3,10,"center"),this.width=j,this.setPosition(this.align),d=0,j=this.prev?this.prev.getMeasuredWidth()+this.margin:0,i=0,g=n.length;g>i;i++)m=n[i]," "!==m&&(a={id:"l"+this.name+d,x:j,y:-c.height,index:m,target:this.name,eval:this.eval,text:m,font:this.font,color:this.fcolor,afterSuccess:"hide",afterFail:"return"},b=new LetterDragContainer(a),this.add(b),j+=this.uwidth+this.margin,d++);return this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.onComplete=function(){return d2oda.evaluator.evaluate(this.oncomplete["function"],this.name,this.oncomplete.target)},b.prototype.isComplete=function(){var a,b,c,d;for(c=this.droptargets,a=0,b=c.length;b>a;a++)if(d=c[a],d.complete===!1)return!1;return!0},b}(Component),TextCompleterContainer=function(a){function b(a,b,c,d,e,f,g,h){this.initialize(a,b,c,d,e,f,g,h)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=g,this.y=h,this.success=null!=(i=a.success)?i:a.text,this.text=this.createText("txt",a.text,b,c,0,-2),this.width=null!=(j=a.width)?j:this.text.getMeasuredWidth(),this.height=null!=(k=a.height)?k:this.text.getMeasuredHeight(),this.complete=!1,this.back=new createjs.Shape,this.bcolor=null!=d?d:"#FFF",this.stroke=null!=f?f:1,this.scolor=null!=e?e:"#333",this.clickable=null!=(l=a.clickable)?l:!0,this.underline=null!=(m=a.underline)?m:!1,this.isCrossword=null!=(n=a.crossword)?n:!1,this.word="",this.underline?this.back.graphics.f(this.bcolor).dr(0,this.underline.y,this.width,this.height+this.underline.y).ss(this.stroke).s(this.scolor).mt(0,this.height+this.underline.y).lt(this.width,this.height+this.underline.y):this.isCrossword?this.back.graphics.f(d).dr(0,5,this.width,this.height).ss(f).s(e).mt(0,this.height).lt(this.width,this.height):this.back.graphics.f(d).dr(0,5,this.width,this.height+5).ss(f).s(e).mt(0,this.height+5).lt(this.width,this.height+5),this.add(this.back,!1),this.clickable?this.addEventListener("click",function(b){return function(){return(dealersjs.mobile.isAndroid()||dealersjs.mobile.isIOS())&&modal.show(),b.parent&&b.parent.clearChildren(),b.writeEnabled=!0,a.underline?b.back.graphics.c().f(b.hexToRGB(b.bcolor,.2)).dr(0,a.underline.y,b.width,b.height+a.underline.y).ss(b.stroke).s(b.scolor).mt(0,b.height+a.underline.y).lt(b.width,b.height+a.underline.y):b.isCrossword?b.back.graphics.c().f(b.hexToRGB(b.bcolor,.2)).dr(0,0,b.width,b.height).ss(b.stroke).s(b.scolor).mt(0,b.height).lt(b.width,b.height):b.back.graphics.c().f(b.hexToRGB(b.bcolor,.2)).dr(0,0,b.width,b.height).ss(b.stroke).s(b.scolor).mt(0,b.height+5).lt(b.width,b.height+5)}}(this)):void 0},b.prototype.hexToRGB=function(a,b){var c,d,e,f;return a="#FFF"===a||"#FFFFFF"===a?"#F00":a,e="0123456789ABCDEF",f=16*e.indexOf(a[1])+e.indexOf(a[2]),d=16*e.indexOf(a[3])+e.indexOf(a[4]),c=16*e.indexOf(a[5])+e.indexOf(a[6]),b?"rgba("+f+", "+d+", "+c+", "+b+")":"rgb("+f+", "+d+", "+c+")"},b.prototype.clearBackground=function(){return this.writeEnabled=!1,this.underline?this.back.graphics.c().f(this.bcolor).dr(0,this.underline.y,this.width,this.height+this.underline.y).ss(this.stroke).s(this.scolor).mt(0,this.height+this.underline.y).lt(this.width,this.height+this.underline.y):this.isCrossword?this.back.graphics.c().f(this.bcolor).dr(0,5,this.width,this.height).ss(this.stroke).s(this.scolor).mt(0,this.height).lt(this.width,this.height):this.back.graphics.c().f(this.bcolor).dr(0,5,this.width,this.height).ss(this.stroke).s(this.scolor).mt(0,this.height+5).lt(this.width,this.height+5)},b.prototype.write=function(a){return a?(this.text.parent||(this.text.textAlign="center",this.text.x=this.width/2,this.add(this.text,!1)),"<-"===a?this.word=this.word.slice(0,this.word.length-1):this.word+="-"===a?" ":a,this.text.text=this.word):this.word},b.prototype.writeText=function(a){return this.text.parent||(this.text.textAlign="center",this.text.x=this.width/2,this.add(this.text,!1)),this.word=a,this.text.text=a},b.prototype.setRectOutline=function(a,b,c){return this.isCrossword?this.back.graphics.f(a).ss(b).s(c).dr(0,0,this.width,this.height):this.back.graphics.f(a).ss(b).s(c).dr(0,0,this.width,this.height+5)},b.prototype.update=function(a){return a&&a.complete&&(this.complete=a.complete),this.text.textAlign="center",this.text.x=this.width/2,this.add(this.text,!1),TweenLite.from(this,.3,{alpha:0})},b}(Component),LetterContainer=function(a){function b(a,b,c,d,e,f,g,h){this.initialize(a,b,c,d,e,f,g,h)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d,e,f,g,h){var i,j,k;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),Module.extend(this,d2oda.utilities),this.mouseChildren=!1,this.x=g,this.y=h,this.name=null!=(i="ltc_"+a.name)?i:"ltc_"+a.text,this.success=null!=(j=a.success)?j:a.text,this.text=this.createText("txt",a.text,b,c,a.width/2,a.height/2-15,"center"),this.width=a.width,this.height=a.height,this.radius=null!=(k=a.radius)?k:"20",this.complete=!1,this.selectionEnabled=!1,this.back=new createjs.Shape,this.shape=new createjs.Shape,this.back.graphics.f(d).dr(0,0,this.width,this.height),f){case"rect":this.shape.graphics.f(e).dr(0,0,this.width,this.height);break;case"round":this.shape.graphics.f(e).rr(0,0,this.width,this.height,this.radius);break;case"circle":this.shape.graphics.f(e).dc(this.width/2,this.height/2,this.radius)}return this.add(this.back,!1),this.add(this.shape,!1),this.add(this.text,!1),this.shape.visible=!1},b.prototype.showShape=function(a){return null==a&&(a=!0),this.shape.visible=a},b.prototype.update=function(){return this.complete=!0},b}(Component),LetterDragContainer=function(a){function b(a){this.handleMouseDown=bind(this.handleMouseDown,this),this.update=bind(this.update,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),Module.extend(this,d2oda.actions),Module.extend(this,d2oda.utilities),this.name=null!=(e=a.name)?e:a.id,this.x=a.x,this.y=a.y,this.pos={x:this.x,y:this.y},this.index=a.index,this.target=this.isArray(a.target)?a.target:lib[a.target],this.droptargets=new Array,this.eval=a.eval,this.label=this.createText("txt",a.text,a.font,a.color,0,0),this.width=this.label.getMeasuredWidth(),this.height=this.label.getMeasuredHeight(),a.afterSuccess){case"hide":this.afterSuccess=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterSuccess=this.returnToPlace;break;case"origin":this.afterSuccess=this.setInOrigin}switch(a.afterFail){case"hide":this.afterFail=this.hide;break;case"inplace":this.afterFail=this.putInPlace;break;case"return":this.afterFail=this.returnToPlace;break;case"origin":this.afterFail=this.setInOrigin}if(b=new createjs.Shape,b.graphics.beginFill("#000").drawRect(-5,-3,this.label.getMeasuredWidth()+10,this.label.getMeasuredHeight()+6),this.label.hitArea=b,this.add(this.label,!1),this.target)if(this.isArray(this.target))for(f=this.target,c=0,d=f.length;d>c;c++)g=f[c],lib[g].observer.subscribe(ComponentObserver.UPDATED,this.update);else this.target.observer.subscribe(ComponentObserver.UPDATED,this.update);return this.addEventListener("mousedown",this.handleMouseDown)},b.prototype.update=function(){var a,b,c,d,e;if(this.isArray(this.target)){for(a=new Array,d=this.target,b=0,c=d.length;c>b;b++)e=d[b],a.merge(lib[e].droptargets);return this.droptargets=a}return this.droptargets=this.target.droptargets},b.prototype.handleMouseDown=function(a){var b,c,d;return c=a.stageX/d2oda.stage.r,d=a.stageY/d2oda.stage.r,b={x:c-this.x,y:d-this.y},this.x=c-b.x,this.y=d-b.y,this.addEventListener("pressmove",function(a){return function(e){return c=e.stageX/d2oda.stage.r,d=e.stageY/d2oda.stage.r,a.x=c-b.x,a.y=d-b.y,!1}}(this)),this.addEventListener("pressup",function(b){return function(){return b.removeAllEventListeners("pressmove"),b.removeAllEventListeners("pressup"),b.droptargets&&b.droptargets.length>0?b.evaluateDrop(a):b.dispatchEvent({type:"drop"}),!1}}(this)),!1},b.prototype.evaluateDrop=function(){var a,b,c,d,e,f,g;for(g=null,b=!1,f=this.droptargets,c=0,d=f.length;d>c;c++)a=f[c],e=a.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),a.hitTest(e.x,e.y)&&(g=a,b=!0);return b?(d2oda.evaluator.evaluate(this.eval,this.name,g),this.dispatchEvent({type:"dropped",drop:g})):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},b}(Component),ImageWordCompleterContainer=function(a){function b(a){this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c;return this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=a.x,this.y=a.y,this.margin=a.margin,this.uwidth=a.uwidth,this.uheight=a.uheight,this.bcolor=a.bcolor,this.scolor=a.scolor,this.stroke=a.stroke,this.name=null!=(b=a.name)?b:a.id,this.align=null!=(c=a.align)?c:"",this.observer=new ComponentObserver,this.droptargets=new Array},b.prototype.update=function(a){var b,c,d,e,f,g,h;for(this.removeAllChildren(),d=0,h=a.containers,e=0,f=h.length;f>e;e++)b=h[e],g=d*(this.uwidth+this.margin),c=new ImageCompleterContainer(b,g,this.uwidth,this.uheight,this.bcolor,this.scolor,this.stroke),this.droptargets.push(c),this.add(c,!1),d++;switch(this.width=(this.uwidth+this.margin)*(d-1),this.align){case"center":this.regX=this.width/2}return this.observer.notify(ComponentObserver.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},b.prototype.isComplete=function(){var a,b,c,d;for(c=this.droptargets,a=0,b=c.length;b>a;a++)if(d=c[a],d.complete===!1)return!1;return!0},b}(Component),ImageCompleterContainer=function(a){function b(a,b,c,d,e,f,g){this.initialize(a,b,c,d,e,f,g)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a,b,c,d,e,f,g){var h,i;return null==b&&(b=0),null==c&&(c=100),null==d&&(d=100),null==e&&(e="#FFF"),null==f&&(f="#333"),null==g&&(g=3),this.Container_initialize(),Module.extend(this,d2oda.methods),this.x=b,this.success=a.success,this.image=a.img,this.name=null!=(i=a.name)?i:a.id,this.width=c,this.height=d,this.complete=!1,h=new createjs.Shape,h.graphics.f(e).dr(0,0,c,d).ss(g).s(f).mt(0,d).lt(c,d),this.add(h,!1)},b.prototype.update=function(){var a;return a=this.createBitmap(this.image,this.image,0,-5),a.scaleX=a.scaleY=a.width>a.height?this.width/a.width:this.height/a.height,this.add(a,!1),this.hitTester=a.hitTester,TweenLite.from(this,.3,{alpha:0})},b}(Component),SceneStack=function(a){function b(a){this.lastScene=bind(this.lastScene,this),this.prev=bind(this.prev,this),this.next=bind(this.next,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e;for(this.Container_initialize(),this.stack=[],this.currentScene=0,b=0,c=a.length;c>b;b++)d=a[b],e=new Scene(d),e.visible=!1,this.addChild(e),this.stack.push(e);return this.setCurrent(),TweenLite.from(this,1,{alpha:0})},b.prototype.next=function(){return this.stack[this.currentScene].chooseEnabled?(this.stack[this.currentScene].visible=!1,this.currentScene=this.stack[this.currentScene].choose):this.currentScene++,this.stack.length>1&&this.currentScene<this.stack.length?(this.stack[this.currentScene].chooseEnabled||(this.stack[this.currentScene-1].visible=!1),this.setCurrent(),lib.scene.init(),TweenLite.from(this,1,{alpha:0})):TweenLite.to(this,1,{alpha:0,delay:1,onComplete:this.lastScene})},b.prototype.prev=function(){return this.currentScene--,this.currentScene>=0?(this.stack[this.currentScene+1].visible=!1,this.setCurrent(),lib.scene.init(),TweenLite.from(this,1,{alpha:0})):this.currentScene++},b.prototype.lastScene=function(){return"clock"===lib.score.type&&lib.score.stop(),this.dispatchEvent({type:"complete"})},b.prototype.setCurrent=function(){return lib.scene=this.stack[this.currentScene],lib.scene.visible=!0},window.SceneStack=b,b}(Component),SceneFactory=function(){function a(){}return a.prototype.makeChild=function(a){switch(a.type){case"abc":return new ABCContainer(a);case"drg":return new DragContainer(a);case"grd":return new GridContainer(a);case"txt":return new TextContainer(a);case"img":return new ImageContainer(a);case"lbl":return new LabelContainer(a);case"cln":return new CloneContainer(a);case"wrt":return new WriteContainer(a);case"spr":return new SpriteContainer(a);case"btn":return new ButtonContainer(a);case"stps":return new StepsContainer(a);case"chs":return new ChooseContainer(a);case"cwd":return new CrossWordsContainer(a);case"wsch":return new WordSearchContainer(a);case"ldrg":return new LetterDragContainer(a);case"pcct":return new PhraseCloneContainer(a);case"wcpt":return new WordCompleterContainer(a);case"swct":return new ScrambledWordContainer(a);case"ccpt":return new CloneCompleterContainer(a);case"pcpt":return new PhraseCompleterContainer(a);case"iwcpt":return new ImageWordCompleterContainer(a);case"grp":return new ComponentGroup(a)}},window.SceneFactory=a,a}(),SceneObserver=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return extend(b,a),b.NEXT_STEP="next_step",b.COMPLETE="scene_complete",window.SceneObserver=b,b}(Observer),Scene=function(a){function b(a){this.setStep=bind(this.setStep,this),this.next=bind(this.next,this),this.sndsuccess=bind(this.sndsuccess,this),this.initialize(a)}return extend(b,a),b.prototype=new createjs.Container,b.prototype.Container_initialize=b.prototype.initialize,b.prototype.initialize=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;switch(this.Container_initialize(),Module.extend(this,d2oda.methods),this.factory=new SceneFactory,this.observer=new SceneObserver,this.currentStep=0,this.choose=null!=(k=a.answers.choose)?k:0,b=a.answers.collection.slice(0),this.answers=a.answers.mixed===!0?d2oda.utilities.shuffle(b):b,this.chooseEnabled=a.answers.chooseEnabled,a.answers.type){case"steps":this.observer.subscribe(SceneObserver.NEXT_STEP,this.next);break;case"limit":this.answers=d2oda.utilities.shuffleNoRepeat(this.answers,a.answers.limit),this.observer.subscribe(SceneObserver.NEXT_STEP,this.next)}if(a.containers.length>0)for(l=a.containers,g=0,h=l.length;h>g;g++)d=l[g],c=this.factory.makeChild(d),this.add(c);if(a.groups.length>0){for(m=a.groups,n=[],j=0,i=m.length;i>j;j++)f=m[j],e=this.factory.makeChild(f),n.push(lib[f.id]=e);return n}},b.prototype.init=function(){return"clock"===lib.score.type&&(lib.score.start(),lib.score.addEventListener("count_complete",lib.game.nextScene)),this.setStep()},b.prototype.success=function(a,b){var c,d,e,f;if(null==a&&(a=!0),null==b&&(b=!0),b&&createjs.Sound.stop(),a&&lib.score.plusOne(),e=this.answers[this.currentStep],e&&e.length>0)for(c=0,d=e.length;d>c;c++)if(f=e[c],"snd"!==f.name&&"global"!==f.name&&lib[f.name].isComplete()===!1)return!1;return this.nextStep()},b.prototype.sndsuccess=function(){return this.success(!1)},b.prototype.fail=function(){return lib.score.enableBlock(),lib.mainContainer.warning()},b.prototype.next=function(){return this.currentStep++,this.currentStep>=this.answers.length?this.delay(1e3,function(){return lib.game.observer.notify(GameObserver.NEXT_SCENE)}):this.delay(1e3,this.setStep)},b.prototype.setStep=function(){var a,b,c,d,e,f;if(lib.instructions.playing)return console.log("instructions playing"),lib.instructions.addEventListener("complete",this.setStep);if(e=this.answers[this.currentStep],e&&e.length>0){for(c=[],a=0,b=e.length;b>a;a++)switch(f=e[a],f.name){case"total":d2oda.evaluator.total=f.opts.total,c.push(d2oda.evaluator.total_index=0);break;case"global":d2oda.evaluator.success=f.opts.success,c.push(!1);break;case"snd":this.snd=f.opts.id,createjs.Sound.stop(),d=createjs.Sound.play(f.opts.id),f.opts.successoncomplete&&d.addEventListener("complete",this.sndsuccess),c.push(!1);break;case"window":this.window=window,f.opts.keydown?(this.window.target=f.opts.target,this.window.onkeyup=f.opts.keydown,c.push(this.window.onkeydown=function(a){return dealersjs.mobile.isAndroid()||dealersjs.mobile.isIOS()?void 0:(a.preventDefault(),a.stopPropagation())})):c.push(void 0);break;default:c.push(lib[f.name].update(f.opts))}return c}},b.prototype.nextStep=function(){return console.log("next step"),this.observer.notify(SceneObserver.NEXT_STEP)},window.Scene=b,b}(Component);